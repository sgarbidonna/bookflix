{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bookflix\\\\bookflix\\\\front-end\\\\src\\\\components\\\\Home.js\";\nimport React, { Component, useEffect } from 'react';\nimport { BrowserRouter as Router, link, Redirect, Link } from 'react-router-dom';\nimport HomeAdmin from './VistaAdmin/HomeAdmin';\nimport HomeSuscriptor from './VistaSuscriptor/HomeSuscriptor';\nimport axios from 'axios';\nconst soyAdminApi = 'http://localhost:4000/api/suscriptores/soyAdmin';\nexport default class Home extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: '',\n      token: sessionStorage.getItem('token'),\n      soyAdmin: '' // se debe setear el tipo de usuario\n\n    };\n    this.setSoyAdmin = this.setSoyAdmin.bind(this);\n  }\n\n  async setSoyAdmin() {\n    const {\n      user\n    } = this.state.user;\n    await axios.get(soyAdminApi, {\n      user: user,\n      headers: {\n        'xaccess': this.state.token\n      }\n    }).then(res => {\n      this.setState({\n        soyAdmin: res.data\n      });\n    }).catch(err => {\n      console.log(err.response);\n    });\n  }\n\n  render() {\n    this.setSoyAdmin();\n    return this.state.token !== null ? // si token es distinto de vacio pregunto por el admin\n    this.state.soyAdmin ? /*#__PURE__*/React.createElement(HomeAdmin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 23\n      }\n    }) : /*#__PURE__*/React.createElement(HomeSuscriptor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 23\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 19\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["D:/Documentos/GitHub/bookflix/bookflix/front-end/src/components/Home.js"],"names":["React","Component","useEffect","BrowserRouter","Router","link","Redirect","Link","HomeAdmin","HomeSuscriptor","axios","soyAdminApi","Home","constructor","state","user","token","sessionStorage","getItem","soyAdmin","setSoyAdmin","bind","get","headers","then","res","setState","data","catch","err","console","log","response","render"],"mappings":";AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA4BC,SAA5B,QAA4C,OAA5C;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,IAAlC,EAAwCC,QAAxC,EAAkDC,IAAlD,QAA8D,kBAA9D;AAEA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,MAAMC,WAAW,GAAG,iDAApB;AAEA,eAAe,MAAMC,IAAN,SAAmBX,SAAnB,CAA6B;AAExCY,EAAAA,WAAW,GAAE;AACT;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,IAAI,EAAE,EADC;AAEPC,MAAAA,KAAK,EAAEC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAFA;AAGPC,MAAAA,QAAQ,EAAC,EAHF,CAIP;;AAJO,KAAX;AAMA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AAEH;;AACD,QAAMD,WAAN,GAAoB;AAEhB,UAAM;AAACL,MAAAA;AAAD,QAAS,KAAKD,KAAL,CAAWC,IAA1B;AACA,UAAML,KAAK,CAACY,GAAN,CAAUX,WAAV,EAAsB;AACxBI,MAAAA,IAAI,EAAEA,IADkB;AAExBQ,MAAAA,OAAO,EAAC;AAAC,mBAAU,KAAKT,KAAL,CAAWE;AAAtB;AAFgB,KAAtB,EAGHQ,IAHG,CAGEC,GAAG,IAAG;AACV,WAAKC,QAAL,CAAc;AACVP,QAAAA,QAAQ,EAAGM,GAAG,CAACE;AADL,OAAd;AAGH,KAPK,EAQLC,KARK,CAQCC,GAAG,IAAG;AAACC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB;AAA0B,KARlC,CAAN;AASH;;AAEDC,EAAAA,MAAM,GAAG;AAEL,SAAKb,WAAL;AACA,WACI,KAAKN,KAAL,CAAWE,KAAX,KAAqB,IAArB,GAA6B;AACzB,SAAKF,KAAL,CAAWK,QAAX,gBACM,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADN,gBAEM,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHV,gBAIM,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALV;AAOH;;AArCuC","sourcesContent":["\r\nimport React, { Component , useEffect} from 'react'\r\nimport { BrowserRouter as Router, link, Redirect, Link } from 'react-router-dom';\r\n\r\nimport HomeAdmin from './VistaAdmin/HomeAdmin';\r\nimport HomeSuscriptor from './VistaSuscriptor/HomeSuscriptor';\r\nimport axios from 'axios';\r\nconst soyAdminApi = 'http://localhost:4000/api/suscriptores/soyAdmin'\r\n\r\nexport default class Home extends Component {\r\n\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            user: '',\r\n            token: sessionStorage.getItem('token'),\r\n            soyAdmin:''\r\n            // se debe setear el tipo de usuario\r\n        };\r\n        this.setSoyAdmin = this.setSoyAdmin.bind(this)\r\n       \r\n    }  \r\n    async setSoyAdmin() {\r\n\r\n        const {user} = this.state.user;\r\n        await axios.get(soyAdminApi,{\r\n            user: user,\r\n            headers:{'xaccess':this.state.token}  \r\n        }).then(res =>{\r\n            this.setState({\r\n                soyAdmin : res.data\r\n            })\r\n        })\r\n        .catch(err =>{console.log(err.response)});\r\n    };\r\n\r\n    render() {\r\n        \r\n        this.setSoyAdmin()\r\n        return (\r\n            this.state.token !== null ?  // si token es distinto de vacio pregunto por el admin\r\n                this.state.soyAdmin \r\n                    ? <HomeAdmin></HomeAdmin> \r\n                    : <HomeSuscriptor></HomeSuscriptor>\r\n                : <Redirect to=\"/login\"/>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}