{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bookflix\\\\bookflix\\\\front-end\\\\src\\\\components\\\\VistaSuscriptor\\\\ModificarSuscripcion.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios'; //Constante a la cual hacemos la consulta\n\nconst suscriptores = 'http://localhost:4000/api/suscriptores/me';\nconst modificar = 'http://localhost:4000/api/suscriptores/modificar/';\nexport default class MiSuscripcion extends Component {\n  constructor() {\n    super();\n\n    this.getData = async () => {\n      await axios.get(suscriptores, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setSusripcion(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = {\n      token: sessionStorage.getItem('token'),\n      id: '',\n      nombre: '',\n      email: '',\n      password: '',\n      suscripcion: '',\n      dni: '',\n      rta: '',\n      añoE: '',\n      mesE: '',\n      valorInicial: ''\n    };\n    this.modificarSuscriptor = this.modificarSuscriptor.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n  }\n\n  setSusripcion(res) {\n    this.setState({\n      id: res._id,\n      nombre: res.nombre,\n      email: res.email,\n      dni: res.dni,\n      suscripcion: res.suscripcion,\n      valorInicial: res.suscripcion,\n      numT: '',\n      codT: ''\n    });\n  }\n\n  async componentDidMount() {\n    this.getData();\n  }\n\n  validaciones() {\n    if (this.state.numT.length != 16) {\n      return alert('Pruebe con una tarjeta que contenga 16 dígitos');\n    } else if (this.state.codT.length != 3) {\n      return alert('Ingrese un código de seguridad de 3 dígitos');\n    }\n\n    var aux = parseInt(this.state.añoE);\n\n    if (this.state.añoE.length == 2) {\n      if (aux == 20) {\n        var aux2 = parseInt(this.state.mesE);\n\n        if (aux2 < 5) {\n          return alert('Ingrese una tarjeta que no esté vencida');\n        }\n      } else if (aux < 20) {\n        return alert('Ingrese una tarjeta que no esté vencida');\n      }\n    } else if (this.state.añoE.length == 4) {\n      if (aux == 2020) {\n        var aux2 = parseInt(this.state.mesE);\n\n        if (aux2 < 5) {\n          return alert('Ingrese una tarjeta que no esté vencida');\n        }\n      } else if (aux < 2020) {\n        return alert('Ingrese una tarjeta que no esté vencida');\n      }\n    }\n  }\n\n  async modificarSuscriptor(event) {\n    event.preventDefault();\n\n    if (this.state.valorInicial !== this.state.suscripcion) {\n      if (this.state.numT === '' && this.state.codT === '') {\n        return alert('Ingrese los datos de la tarjeta');\n      }\n\n      this.validaciones();\n    }\n\n    await axios.post(modificar, {\n      id: this.state.id,\n      email: this.state.email,\n      nombre: this.state.nombre,\n      suscripcion: this.state.suscripcion,\n      dni: this.state.dni,\n      password: this.state.password\n    }, {\n      headers: {\n        'xaccess': this.state.token\n      }\n    }).then(res => {\n      alert(JSON.stringify(res.data));\n    }).catch(err => {\n      alert(JSON.stringify(err.data));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-novedad\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.modificarSuscriptor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      class: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, \"Mi Suscripci\\xF3n: \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"nombre\",\n      name: \"nombre\",\n      onChange: this.onInputChange,\n      Value: this.state.nombre,\n      placeholder: \"Ingrese su nombre\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"email\",\n      name: \"email\",\n      onChange: this.onInputChange,\n      Value: this.state.email,\n      placeholder: \"Ingrese su Email\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, \"DNI \"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"dni\",\n      name: \"dni\",\n      onChange: this.onInputChange,\n      value: this.state.dni,\n      placeholder: \"Ingrese su DNI\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, \" Su tipo de suscripci\\xF3n actual es \", this.state.valorInicial, \".\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, \"Si desea modificarla, ingrese la selecci\\xF3n y los campos de la tarjeta nuevamente \"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.onInputChange,\n      name: \"suscripcion\",\n      value: \"REGULAR\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }, \" REGULAR\"), \" \"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.onInputChange,\n      name: \"suscripcion\",\n      value: \"PREMIUM\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 33\n      }\n    }, \" PREMIUM\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 29\n      }\n    }, \"N\\xFAmero de tarjeta  \"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"numT\",\n      name: \"numT\",\n      onChange: this.onInputChange,\n      value: this.state.numT,\n      placeholder: \"Ingrese n\\xFAmero de tarjeta, deber\\xE1 contener 16 digitos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 29\n      }\n    }, \"Codigo De Tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"codT\",\n      name: \"codT\",\n      onChange: this.onInputChange,\n      value: this.state.codT,\n      placeholder: \"Ingrese el codigo de su tajeta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, \"Contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onInputChange,\n      Value: \"\",\n      placeholder: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }\n    }, \"Fecha de expiracion\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"mesE\",\n      name: \"mesE\",\n      onChange: this.onInputChange,\n      value: this.state.mesE,\n      required: true,\n      placeholder: \"MES\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"a\\xF1oE\",\n      name: \"a\\xF1oE\",\n      onChange: this.onInputChange,\n      value: this.state.añoE,\n      required: true,\n      placeholder: \"A\\xD1O\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-danger btn-lg btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }\n    }, \"Modificar\")))))));\n  }\n\n}","map":{"version":3,"sources":["D:/Documentos/GitHub/bookflix/bookflix/front-end/src/components/VistaSuscriptor/ModificarSuscripcion.js"],"names":["React","Component","axios","suscriptores","modificar","MiSuscripcion","constructor","getData","get","headers","state","token","then","res","setSusripcion","data","catch","err","console","log","onInputChange","event","setState","target","name","value","sessionStorage","getItem","id","nombre","email","password","suscripcion","dni","rta","añoE","mesE","valorInicial","modificarSuscriptor","bind","_id","numT","codT","componentDidMount","validaciones","length","alert","aux","parseInt","aux2","preventDefault","post","JSON","stringify","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n//Constante a la cual hacemos la consulta\r\nconst suscriptores= 'http://localhost:4000/api/suscriptores/me';\r\nconst modificar='http://localhost:4000/api/suscriptores/modificar/';\r\n\r\n\r\nexport default class MiSuscripcion extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            token: sessionStorage.getItem('token'),\r\n\r\n            id: '',\r\n            nombre: '',\r\n            email: '',\r\n            password: '',\r\n            suscripcion:'',    \r\n            dni:'',\r\n            rta:'',\r\n            añoE:'',\r\n            mesE:'',\r\n\r\n\r\n            valorInicial:'',     \r\n        };\r\n       \r\n\r\n        this.modificarSuscriptor = this.modificarSuscriptor.bind(this);\r\n        this.onInputChange = this.onInputChange.bind(this);\r\n\r\n        \r\n    }\r\n    \r\n    \r\n\r\n    setSusripcion(res){\r\n        this.setState({\r\n            id: res._id,\r\n            nombre: res.nombre,\r\n            email: res.email,\r\n            dni: res.dni, \r\n            suscripcion: res.suscripcion,\r\n            valorInicial: res.suscripcion,\r\n            numT: '',\r\n            codT:'',\r\n            \r\n        });\r\n    }\r\n\r\n    \r\n\r\n    getData = async () =>{\r\n        await axios.get(suscriptores,{\r\n            headers:{'xaccess':this.state.token}  \r\n        })\r\n        .then(res =>{\r\n            this.setSusripcion(res.data);\r\n        })\r\n        .catch(err =>{console.log(err)})\r\n            \r\n    }\r\n\r\n    async componentDidMount(){\r\n        \r\n        this.getData();\r\n        \r\n    }\r\n\r\n    onInputChange = (event) => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        })\r\n    };\r\n    \r\n    validaciones(){\r\n        \r\n        if (this.state.numT.length != 16){\r\n            return alert('Pruebe con una tarjeta que contenga 16 dígitos')\r\n        }\r\n        else if (this.state.codT.length != 3){\r\n            return alert('Ingrese un código de seguridad de 3 dígitos')\r\n        }\r\n        var aux = parseInt(this.state.añoE);\r\n\r\n        if(this.state.añoE.length == 2){\r\n            if(aux == 20 ){\r\n                var aux2 = parseInt(this.state.mesE);\r\n                if(aux2 < 5){\r\n                    return alert('Ingrese una tarjeta que no esté vencida')\r\n                }\r\n            }else if (aux < 20){\r\n                return alert('Ingrese una tarjeta que no esté vencida')\r\n            }\r\n       \r\n        }else if(this.state.añoE.length == 4){\r\n            \r\n            if(aux == 2020){\r\n                var aux2 = parseInt(this.state.mesE);\r\n                if(aux2 < 5){\r\n                    return alert('Ingrese una tarjeta que no esté vencida')\r\n                }\r\n            } else if (aux < 2020){\r\n                return alert('Ingrese una tarjeta que no esté vencida')\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    async modificarSuscriptor(event){\r\n        event.preventDefault();  \r\n       \r\n        \r\n        \r\n        if(this.state.valorInicial !== this.state.suscripcion){\r\n           \r\n            if(this.state.numT==='' && this.state.codT===''){\r\n                return (alert('Ingrese los datos de la tarjeta'));\r\n            }\r\n\r\n            this.validaciones();\r\n        }  \r\n        \r\n        await axios.post(modificar, {\r\n                    id: this.state.id,\r\n                    email: this.state.email,\r\n                    nombre: this.state.nombre,\r\n                    suscripcion: this.state.suscripcion,\r\n                    dni: this.state.dni,\r\n                    password:this.state.password,\r\n                }\r\n                , { headers: { 'xaccess': this.state.token } })\r\n                .then(res => {\r\n                    alert(JSON.stringify(res.data))\r\n                })\r\n                .catch(err => {\r\n                    alert(JSON.stringify(err.data))\r\n                });\r\n\r\n    }\r\n   \r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n            <div className=\"form-novedad\" >\r\n            <div className=\"col-md-6 offset-md-3\">\r\n             <div className=\"card card-body text-light bg-dark\">\r\n\r\n             <form onSubmit={this.modificarSuscriptor} >\r\n\r\n                <h5 class=\"card-title\">Mi Suscripción: </h5>\r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">Nombre\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"nombre\" \r\n                    name =\"nombre\"\r\n                    onChange={this.onInputChange}\r\n                    Value={this.state.nombre}\r\n                    placeholder=\"Ingrese su nombre\"\r\n                    required>\r\n                </input>    \r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">Email\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"email\" \r\n                    name =\"email\"\r\n                    onChange={this.onInputChange}\r\n                    Value={this.state.email}\r\n                    placeholder=\"Ingrese su Email\"\r\n                    required\r\n                    >\r\n                </input>    \r\n                </div>\r\n               \r\n                \r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">DNI </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"dni\" \r\n                    name =\"dni\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.dni}\r\n                    placeholder=\"Ingrese su DNI\"\r\n                    required>\r\n                </input>    \r\n            </div>\r\n\r\n                <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\r\n                <label className=\"text-light\"> Su tipo de suscripción actual es {this.state.valorInicial}.</label>\r\n            \r\n                </div>\r\n           \r\n                        <div>\r\n                        \r\n                        <label className=\"text-light\">Si desea modificarla, ingrese la selección y los campos de la tarjeta nuevamente </label>\r\n                        <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\r\n                        \r\n                        <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.onInputChange} name=\"suscripcion\" value=\"REGULAR\" data-toggle=\"button\"> REGULAR</button> </label>\r\n                        <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.onInputChange} name=\"suscripcion\" value=\"PREMIUM\" data-toggle=\"button\"> PREMIUM</button></label>\r\n                        \r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-light\">Número de tarjeta  </label>\r\n                            <input \r\n                                className=\"form-control\" \r\n                                id=\"numT\" \r\n                                name =\"numT\"\r\n                                onChange={this.onInputChange}\r\n                                value={this.state.numT}\r\n                                placeholder=\"Ingrese número de tarjeta, deberá contener 16 digitos\">\r\n                            </input>    \r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-light\">Codigo De Tarjeta\r\n                            </label>\r\n                            <input \r\n                                className=\"form-control\" \r\n                                id=\"codT\" \r\n                                name =\"codT\"\r\n                                onChange={this.onInputChange}\r\n                                value={this.state.codT}\r\n                                placeholder=\"Ingrese el codigo de su tajeta\">\r\n                            </input>    \r\n                        </div>\r\n                    </div>\r\n                   \r\n                  \r\n                    <div className=\"form-group\">\r\n                <label className=\"text-light\">Contraseña\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    type=\"password\"\r\n                    id=\"password\" \r\n                    name =\"password\"\r\n                    onChange={this.onInputChange}\r\n                    Value=\"\"\r\n                    placeholder=\"\"\r\n                    >\r\n                </input>    \r\n                \r\n                </div>\r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">Fecha de expiracion\r\n                </label>\r\n                <input \r\n                    type=\"number\"\r\n                    className=\"form-control\" \r\n                    id=\"mesE\" \r\n                    name =\"mesE\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.mesE}\r\n                    required\r\n                   \r\n                    placeholder=\"MES\">\r\n                </input>    \r\n            \r\n                <input \r\n                    type=\"number\"\r\n                    className=\"form-control\" \r\n                    id=\"añoE\" \r\n                    name =\"añoE\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.añoE}\r\n                    required\r\n                   \r\n                    placeholder=\"AÑO\">\r\n                </input>    \r\n            </div>\r\n\r\n\r\n         \r\n            \r\n            <div className=\"form-group\">\r\n                <button  type=\"submit\" className=\"btn btn-danger btn-lg btn-block\"\r\n                        >\r\n                    Modificar \r\n                </button>\r\n            </div>\r\n\r\n            </form>\r\n            </div>\r\n            </div>\r\n            </div>\r\n           \r\n\r\n        </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}