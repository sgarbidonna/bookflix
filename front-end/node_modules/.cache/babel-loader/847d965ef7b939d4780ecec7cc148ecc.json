{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bookflix\\\\bookflix\\\\front-end\\\\src\\\\components\\\\RegistrarSuscriptor.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport Navegacion from './Navegacion';\nconst cargar = 'http://localhost:4000/api/suscriptores/registrar';\n\nclass RegistrarSuscriptor extends Component {\n  constructor() {\n    super();\n\n    this.onInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.getToken = res => {\n      const {\n        data\n      } = res;\n      const {\n        token,\n        user\n      } = data;\n      sessionStorage.setItem('token', token);\n      sessionStorage.setItem('user', JSON.stringify({\n        user\n      }));\n      this.setState({\n        token: token,\n        user: user\n      });\n    };\n\n    this.getErrors = err => {\n      //traigo la data de los errores\n      const {\n        data\n      } = err; //traigo los mensajes de errores por su nombre\n\n      const {\n        nombre,\n        email,\n        password,\n        password2\n      } = data; //pongo los mensajes en un arreglo\n\n      const error = [nombre, email, password, password2]; //mapeo el arreglo\n\n      this.setState({\n        errors: error\n      });\n      error.map(err => {\n        if (!err === '') alert(err);\n      });\n    };\n\n    this.state = {\n      nombre: '',\n      email: '',\n      password: '',\n      password2: '',\n      dni: '',\n      suscripcion: '',\n      numT: '',\n      codT: '',\n      token: '',\n      user: null,\n      errors: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.cargarSuscriptor = this.cargarSuscriptor.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.getToken = this.getToken.bind(this);\n    this.getErrors = this.getErrors.bind(this);\n    this.setRegular = this.setRegular.bind(this);\n    this.setPremium = this.setPremium.bind(this);\n    this.tipoSuscripcion = this.tipoSuscripcion(this);\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  setRegular() {\n    this.setState({\n      suscripcion: 'regular'\n    });\n    console.log(this.state.suscripcion);\n  }\n\n  setPremium() {\n    this.setState({\n      suscripcion: 'premium'\n    });\n    console.log(this.state.suscripcion);\n  }\n\n  async cargarSuscriptor(event) {\n    event.preventDefault();\n    await axios.post(cargar, {\n      nombre: this.state.nombre,\n      email: this.state.email,\n      password: this.state.password,\n      password2: this.state.password2,\n      suscripcion: this.state.suscripcion,\n      dni: this.state.dni,\n      numT: this.state.numT,\n      codT: this.state.codT\n    }).then(res => this.getToken(res)).catch(res => {\n      this.getErrors(res.response);\n      alert(res.response);\n    });\n  }\n\n  tipoSuscripcion() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, \"Tipo de Suscripci\\xF3n \"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.setRegular,\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    }, \" REGULAR\"), \" \"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 16\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.setPremium,\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 24\n      }\n    }, \" PREMIUM\")));\n  }\n\n  render() {\n    return !this.state.token && !this.state.user ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Navegacion, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-novedad\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.cargarSuscriptor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"nombre\",\n      name: \"nombre\",\n      onChange: this.onInputChange,\n      value: this.state.nombre,\n      placeholder: \"Ingrese su nombre\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"email\",\n      name: \"email\",\n      onChange: this.onInputChange,\n      value: this.state.email,\n      required: true,\n      placeholder: \"Ingrese un email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, \"Contrese\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onInputChange,\n      value: this.state.password,\n      placeholder: \"Ingrese una contrase\\xF1a\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, \"Confirmaci\\xF3n de contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password2\",\n      name: \"password2\",\n      onChange: this.onInputChange,\n      value: this.state.password2,\n      required: true,\n      placeholder: \"Vuelva a ingresar su contrase\\xF1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, \"DNI\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"dni\",\n      name: \"dni\",\n      onChange: this.onInputChange,\n      value: this.state.dni,\n      placeholder: \"Ingrese su DNI\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, this.tipoSuscripcion), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, \"N\\xFAmero de tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"numT\",\n      name: \"numT\",\n      onChange: this.onInputChange,\n      value: this.state.numT,\n      required: true,\n      placeholder: \"Ingrese n\\xFAmero de tarjeta, deber\\xE1 contener 16 digitos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }, \"Codigo De Tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"codT\",\n      name: \"codT\",\n      onChange: this.onInputChange,\n      value: this.state.codT,\n      required: true,\n      placeholder: \"Ingrese el codigo de su tajeta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-danger btn-lg btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }\n    }, \"Suscribirse\"))))))) : /*#__PURE__*/React.createElement(Redirect, {\n      from: \"/singup\",\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 10\n      }\n    });\n  }\n\n}\n\nexport default RegistrarSuscriptor;","map":{"version":3,"sources":["D:/Documentos/GitHub/bookflix/bookflix/front-end/src/components/RegistrarSuscriptor.js"],"names":["React","Component","axios","Redirect","Navegacion","cargar","RegistrarSuscriptor","constructor","onInputChange","event","setState","target","name","value","getToken","res","data","token","user","sessionStorage","setItem","JSON","stringify","getErrors","err","nombre","email","password","password2","error","errors","map","alert","state","dni","suscripcion","numT","codT","handleChange","bind","cargarSuscriptor","setRegular","setPremium","tipoSuscripcion","console","log","preventDefault","post","then","catch","response","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Navegacion from './Navegacion';\r\n\r\nconst cargar = 'http://localhost:4000/api/suscriptores/registrar';\r\n\r\nclass RegistrarSuscriptor extends Component {\r\n    \r\n    constructor (){\r\n        super();\r\n        this.state = {\r\n            nombre: '', \r\n            email: '',\r\n            password:'',\r\n            password2:'',\r\n            dni:'',\r\n            suscripcion:'',\r\n            numT:'',\r\n            codT:'',\r\n            token:'',\r\n            user: null,\r\n            errors:[],\r\n           \r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.cargarSuscriptor = this.cargarSuscriptor.bind(this);\r\n        this.onInputChange = this.onInputChange.bind(this);\r\n        this.getToken = this.getToken.bind(this);\r\n        this.getErrors = this.getErrors.bind(this);\r\n        this.setRegular= this.setRegular.bind(this);\r\n        this.setPremium= this.setPremium.bind(this);\r\n        this.tipoSuscripcion = this.tipoSuscripcion(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        const { name, value } = event.target;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }    \r\n\r\n    onInputChange = (event) => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        })\r\n    };\r\n    setRegular(){\r\n        \r\n        this.setState({\r\n           suscripcion: 'regular'\r\n        });\r\n        console.log(this.state.suscripcion);\r\n    };\r\n\r\n    setPremium(){\r\n     \r\n        this.setState({\r\n            suscripcion: 'premium'\r\n         });\r\n         console.log(this.state.suscripcion);\r\n\r\n    };\r\n    \r\n    getToken=(res)=>{\r\n            const {data} = res;\r\n            const {token , user} = data; \r\n\r\n           \r\n            sessionStorage.setItem('token', token );\r\n         \r\n            sessionStorage.setItem('user', JSON.stringify( {user} ) );\r\n\r\n            this.setState(\r\n                {\r\n                token: token,\r\n                user: user,\r\n                }\r\n            );\r\n    };\r\n    getErrors=(err)=>{\r\n        //traigo la data de los errores\r\n        const {data} = err;\r\n        //traigo los mensajes de errores por su nombre\r\n        const {nombre , email, password , password2}=data; \r\n        //pongo los mensajes en un arreglo\r\n        const error = [nombre , email, password , password2]; \r\n\r\n        //mapeo el arreglo\r\n        this.setState(\r\n            {errors:error}\r\n        )\r\n        error.map(err=>{\r\n            if(! err === '') \r\n                alert(err);\r\n        } );\r\n        \r\n        \r\n    }\r\n    \r\n    async cargarSuscriptor(event){\r\n\r\n        event.preventDefault();  \r\n        await axios.post(cargar,{\r\n            nombre:this.state.nombre ,\r\n            email: this.state.email,\r\n            password:this.state.password,\r\n            password2:this.state.password2,\r\n            suscripcion:this.state.suscripcion,\r\n            dni:this.state.dni,\r\n            numT:this.state.numT,\r\n            codT:this.state.codT,\r\n        })\r\n                .then(res => this.getToken(res))\r\n                .catch(res => {\r\n                  this.getErrors(res.response);\r\n                  alert(res.response)\r\n                });\r\n\r\n    }\r\n\r\n    tipoSuscripcion(){\r\n        return(\r\n        <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\r\n                <label className=\"text-light\">Tipo de Suscripción </label>\r\n                <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.setRegular} data-toggle=\"button\"  > REGULAR</button> </label>\r\n               \r\n               <label> <button type=\"button\" class=\"btn btn-outline-danger\"  onClick={this.setPremium} data-toggle=\"button\" > PREMIUM</button></label>\r\n                \r\n        </div>\r\n    )}\r\n\r\n    render(){\r\n        return (\r\n           \r\n\r\n        !this.state.token && !this.state.user?\r\n\r\n        <div>  \r\n            <Navegacion/>\r\n        <div className=\"form-novedad\" >\r\n        <div className=\"col-md-6 offset-md-3\">\r\n        <div className=\"card card-body text-light bg-dark\">\r\n        \r\n        <form onSubmit={this.cargarSuscriptor} >\r\n           \r\n\r\n            \r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Nombre\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"nombre\" \r\n                    name =\"nombre\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.nombre}\r\n                    placeholder=\"Ingrese su nombre\"\r\n                    required>\r\n                </input>    \r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Email\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"email\" \r\n                    name =\"email\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.email}\r\n                    required\r\n                    placeholder=\"Ingrese un email\">\r\n                </input>    \r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Contreseña</label>\r\n                <input type='password' className=\"form-control\" \r\n                    id=\"password\" \r\n                    name =\"password\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.password}\r\n                    placeholder=\"Ingrese una contraseña\"\r\n                    required\r\n                ></input> \r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Confirmación de contraseña</label>\r\n                <input type='password' className=\"form-control\" \r\n                    id=\"password2\" \r\n                    name =\"password2\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.password2}\r\n                    required\r\n                    placeholder=\"Vuelva a ingresar su contraseña\"\r\n                ></input> \r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">DNI\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"dni\" \r\n                    name =\"dni\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.dni}\r\n                    placeholder=\"Ingrese su DNI\"\r\n                    required>\r\n                </input>    \r\n            </div>\r\n            \r\n            <div>\r\n            {this.tipoSuscripcion}\r\n            </div>            \r\n\r\n            \r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Número de tarjeta\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"numT\" \r\n                    name =\"numT\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.numT}\r\n                    required\r\n                    placeholder=\"Ingrese número de tarjeta, deberá contener 16 digitos\">\r\n                </input>    \r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Codigo De Tarjeta\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"codT\" \r\n                    name =\"codT\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.codT}\r\n                    required\r\n                    placeholder=\"Ingrese el codigo de su tajeta\">\r\n                </input>    \r\n            </div>\r\n            <div className=\"form-group\">\r\n                <button  type=\"submit\" className=\"btn btn-danger btn-lg btn-block\"\r\n                        >\r\n                    Suscribirse\r\n                </button>\r\n            </div>\r\n                    \r\n    \r\n\r\n         </form>\r\n         </div>\r\n         </div>   \r\n         </div>\r\n         </div> \r\n         :\r\n         <Redirect\r\n         from=\"/singup\"\r\n         to=\"/home\" />\r\n        )\r\n    }\r\n}\r\n\r\nexport default RegistrarSuscriptor;      "]},"metadata":{},"sourceType":"module"}